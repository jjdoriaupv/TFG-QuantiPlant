<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>QuantiPlant - Panel Principal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>QuantiPlant - Panel de Control</h1>

        {% if auto_enabled %}
            <div class="status running">üîÑ Captura autom√°tica en curso</div>
            <div class="stats">
                <div>Fotos restantes: <strong>{{ remaining_photos if remaining_photos is not none else "‚Äî" }}</strong></div>
                <div>Pr√≥ximo disparo: <strong id="next-shot" data-epoch="{{ next_shot_epoch if next_shot_epoch is not none else '' }}">{{ next_shot_epoch if next_shot_epoch is not none else "‚Äî" }}</strong></div>
            </div>
        {% else %}
            <div class="status stopped">‚èπÔ∏è Captura autom√°tica detenida</div>
        {% endif %}

        <form method="POST" action="{{ url_for('foto') }}">
            <input type="hidden" name="carpeta" value="default">
            <button class="button" type="submit">üì∏ Tomar Foto</button>
            <a class="button" href="{{ url_for('galeria_root') }}">üñºÔ∏è Ver Galer√≠a</a>
            <a class="button" href="{{ url_for('config') }}">‚öôÔ∏è Configurar C√°mara</a>
        </form>
    </div>

    <script>
        (function () {
            var el = document.getElementById('next-shot');
            if (!el) return;
            var epoch = el.getAttribute('data-epoch');
            if (!epoch) return;
            var ms = parseFloat(epoch) * 1000;
            if (isNaN(ms)) return;
            var d = new Date(ms);
            el.textContent = d.toLocaleString();
        })();
    </script>
</body>
</html>
